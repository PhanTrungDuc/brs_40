<% provide :title, t("views.books.title") %>

<div class="row row-button">
  <%= link_to t("views.books.create_new_book"),
    new_admin_category_book_path(@category, @book),
    class: "btn btn-success" %>
</div>

<h3 class="col-md-offset-5"><%= @category.category_name %></h3>

<div class="container">
  <div class="row">
    <table class="table table-hover table-striped table-book">
      <thead class="head-table">
        <tr>
          <th><%= t "views.books.id" %></th>
          <th><%= t "views.books.name_title" %></th>
          <th><%= t "views.books.author" %></th>
          <th><%= t "views.books.publish_date" %></th>
          <th><%= t "views.books.rate" %></th>
          <th><%= t "views.books.action" %></th>
        </tr>
      </thead>
      <tbody>
        <% @books.each.with_index do |book, index| %>
          <tr>
            <% stt = (params[:page].to_i - 1) * 8 %>
            <% stt = 0 if stt < 0 %>
            <td> <%= stt + index + 1  %> </td>
            <th><%= link_to book.title, admin_category_book_path(@category, book) %>
              (<%= book.number_of_page.nil? ?
                Settings.zezo : book.number_of_page %>
              <%= t "views.books.pages" %>)</th>
            <th><%= book.author %></th>
            <th><%= book.publish_date %></th>
            <th>
              <%= book.avg_rates.nil? ? Settings.zezo : book.avg_rates %>
              <%= book.number_rate_of_book.nil? ?
                Settings.zezo : book.number_rate_of_book %>
              <%= t "views.books.rate_5" %></th>
            <th>
              <%= link_to t("views.books.show_edit"), edit_admin_category_book_path(@category, book) %>
              <%= link_to t("views.books.delete"), admin_category_book_path(@category, book),
                method: :delete, data: {confirm: t("views.books.confirm")} %>
            </th>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="col-md-offset-3">
    </div>
  </div>
</div>
<%= will_paginate %>
